"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[163],{6598:(e,l,t)=>{t.d(l,{H:()=>o});var n=t(1914),a=t(6417);const o=({label:e,value:l})=>(0,n.Z)(l).then((()=>{a.Z.create({type:"positive",message:`Copied ${e} to clipboard`})}))},163:(e,l,t)=>{t.r(l),t.d(l,{default:()=>K});var n=t(3673),a=t(2323),o=t(8880);function i(e,l,t,i,u,d){const r=(0,n.up)("q-th"),p=(0,n.up)("q-tr"),s=(0,n.up)("q-icon"),c=(0,n.up)("q-input"),y=(0,n.up)("q-td"),m=(0,n.up)("q-tooltip"),w=(0,n.up)("q-btn"),f=(0,n.up)("show-key"),k=(0,n.up)("q-table"),_=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(_,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,{title:e.title,rows:e.keys,columns:e.columns,filter:e.filter,"row-key":"keyID"},{header:(0,n.w5)((e=>[(0,n.Wm)(p,{props:e},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.cols,(l=>((0,n.wg)(),(0,n.j4)(r,{key:l.name,props:e},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(l.label),1)])),_:2},1032,["props"])))),128)),(0,n.Wm)(r,{"auto-width":""})])),_:2},1032,["props"])])),"top-right":(0,n.w5)((()=>[(0,n.Wm)(c,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":l[0]||(l[0]=l=>e.filter=l),placeholder:"Search"},{append:(0,n.w5)((()=>[(0,n.Wm)(s,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,n.w5)((l=>[(0,n.Wm)(p,{props:l},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.cols,(e=>((0,n.wg)(),(0,n.j4)(y,{key:e.name,props:l,onClick:e=>l.expand=!l.expand},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.value),1)])),_:2},1032,["props","onClick"])))),128)),(0,n.Wm)(y,{class:"q-gutter-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{icon:l.expand?"remove":"vpn_key",color:"primary",onClick:e=>l.expand=!l.expand},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("View "+(0,a.zw)(e.label),1)])),_:1})])),_:2},1032,["icon","onClick"]),(0,n.Wm)(w,{icon:"content_copy",color:"primary",onClick:t=>e.addToClipboard({label:e.label,value:l.row.key})},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Copy "+(0,a.zw)(e.label),1)])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(w,{icon:"download",color:"secondary",onClick:t=>e.exportFile(`${e.fileName}.pub`,l.row.key)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Download "+(0,a.zw)(e.label),1)])),_:1})])),_:2},1032,["onClick"]),(0,n.Wm)(w,{icon:"delete",color:"negative",onClick:t=>e.confirmDeletion(l.row.keyID)},{default:(0,n.w5)((()=>[(0,n.Wm)(m,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Delete "+(0,a.zw)(e.label),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["props"]),l.row.key?(0,n.wy)(((0,n.wg)(),(0,n.j4)(p,{key:0,props:l},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{colspan:"2"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{keyValue:l.row.key,label:e.label,keyDetail:""},null,8,["keyValue","label"])])),_:2},1024)])),_:2},1032,["props"])),[[o.F8,l.expand]]):(0,n.kq)("",!0)])),_:1},8,["title","rows","columns","filter"])])),_:1})}var u=t(1959),d=t(8825),r=t(2841),p=t(6598),s=t(5426);const c=[{name:"keyID",required:!0,label:"Key ID",field:"keyID",align:"left",sortable:!0},{name:"userID",required:!0,label:"User ID",field:"userID",align:"left",sortable:!0}],y=(0,n.aZ)({components:{ShowKey:s.Z},name:"KeyTable",props:{title:{type:String,required:!0},label:{type:String,required:!0},keys:{type:Array,required:!0}},emits:{deleteKey:e=>!!e},setup(e,{emit:l}){const t=(0,d.Z)();function n(e){t.dialog({title:"Confirm",message:"Are you sure you want to delete this key?",cancel:!0}).onOk((()=>{l("deleteKey",e),t.notify({type:"positive",message:"Key successfully deleted"})}))}const a=(0,u.Vh)(e,"label"),o=a.value.split(" ").join("_");return{filter:(0,u.iH)(""),initialPagination:{sortBy:"",descending:!1,page:1,rowsPerPage:10},columns:c,fileName:o,confirmDeletion:n,addToClipboard:p.H,exportFile:r.Z}}});var m=t(4260),w=t(4379),f=t(4993),k=t(8186),_=t(2414),g=t(4842),b=t(4554),W=t(3884),v=t(8240),D=t(8870),h=t(7518),q=t.n(h);const I=(0,m.Z)(y,[["render",i]]),K=I;q()(y,"components",{QPage:w.Z,QTable:f.Z,QTr:k.Z,QTh:_.Z,QInput:g.Z,QIcon:b.Z,QTd:W.Z,QBtn:v.Z,QTooltip:D.Z})},5426:(e,l,t)=>{t.d(l,{Z:()=>z});var n=t(3673);function a(e,l,t,a,o,i){const u=(0,n.up)("q-icon"),d=(0,n.up)("q-input"),r=(0,n.up)("show-key-details");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(d,{"model-value":e.keyValue,filled:"",readonly:"",type:"textarea",label:e.label},{append:(0,n.w5)((()=>[e.copy?((0,n.wg)(),(0,n.j4)(u,{key:0,name:"content_copy",class:"cursor-pointer",onClick:l[0]||(l[0]=l=>e.addToClipboard({label:e.label,value:e.keyValue}))})):(0,n.kq)("",!0),e.download?((0,n.wg)(),(0,n.j4)(u,{key:1,name:"download",class:"cursor-pointer",onClick:l[1]||(l[1]=l=>e.exportFile(`${e.filename}.crt`,e.keyValue))})):(0,n.kq)("",!0)])),_:1},8,["model-value","label"]),e.keyDetail?((0,n.wg)(),(0,n.j4)(r,{key:0,plainKey:e.keyValue,label:e.label},null,8,["plainKey","label"])):(0,n.kq)("",!0)])}var o=t(1959),i=t(2841),u=t(6598),d=t(2323);const r=(0,n.Uk)("Private Key ID"),p=(0,n.Uk)("Public Key ID"),s=(0,n.Uk)("User IDs"),c=(0,n.Uk)("Creation Time"),y=(0,n.Uk)("All Key IDs"),m=(0,n.Uk)("Fingerprint"),w=(0,n.Uk)("Algorithim");function f(e,l,t,a,o,i){const u=(0,n.up)("q-item-label"),f=(0,n.up)("q-item-section"),k=(0,n.up)("q-item"),_=(0,n.up)("q-list"),g=(0,n.up)("q-expansion-item");return e.keyRead?((0,n.wg)(),(0,n.j4)(g,{key:0,class:"fit","expand-separator":"",icon:"perm_identity",label:"Advanced",caption:"Key details"},{default:(0,n.w5)((()=>[(0,n.Wm)(_,{bordered:"",separator:""},{default:(0,n.w5)((()=>[(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.encryptionKeyID),1)])),_:1}),(0,n.Wm)(u,{caption:""},{default:(0,n.w5)((()=>[r])),_:1})])),_:1})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.signingKeyID),1)])),_:1}),(0,n.Wm)(u,{caption:""},{default:(0,n.w5)((()=>[p])),_:1})])),_:1})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.keyRead.getUserIDs()),1)])),_:1}),(0,n.Wm)(u,{caption:""},{default:(0,n.w5)((()=>[s])),_:1})])),_:1})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.keyRead.getCreationTime()),1)])),_:1}),(0,n.Wm)(u,{caption:""},{default:(0,n.w5)((()=>[c])),_:1})])),_:1})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.keyRead.getKeyIDs().map((e=>e.toHex()))),1)])),_:1}),(0,n.Wm)(u,{caption:""},{default:(0,n.w5)((()=>[y])),_:1})])),_:1})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.keyRead.getFingerprint()),1)])),_:1}),(0,n.Wm)(u,{caption:""},{default:(0,n.w5)((()=>[m])),_:1})])),_:1})])),_:1}),(0,n.Wm)(k,null,{default:(0,n.w5)((()=>[(0,n.Wm)(f,null,{default:(0,n.w5)((()=>[(0,n.Wm)(u,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,d.zw)(e.keyRead.getAlgorithmInfo()),1)])),_:1}),(0,n.Wm)(u,{caption:""},{default:(0,n.w5)((()=>[w])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,n.kq)("",!0)}var k=t(745),_=function(e,l,t,n){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,o){function i(e){try{d(n.next(e))}catch(l){o(l)}}function u(e){try{d(n["throw"](e))}catch(l){o(l)}}function d(e){e.done?t(e.value):a(e.value).then(i,u)}d((n=n.apply(e,l||[])).next())}))};const g=(0,n.aZ)({name:"ShowKeys",props:{keyValue:{type:Object,default:void 0},plainKey:{type:String,default:void 0}},setup(e){const l=(0,o.iH)(void 0),t=(0,o.iH)(""),a=(0,o.iH)("");return(0,n.bv)((()=>_(this,void 0,void 0,(function*(){const{keyValue:t,plainKey:n}=e;t?l.value=t:n&&(l.value=yield(0,k.c)(n))})))),(0,n.YP)(l,(()=>_(this,void 0,void 0,(function*(){if(l.value){const e=yield l.value.getEncryptionKey();t.value=e.getKeyID().toHex()}})))),(0,n.YP)(l,(()=>_(this,void 0,void 0,(function*(){if(l.value){const e=yield l.value.getSigningKey();a.value=e.getKeyID().toHex()}})))),{encryptionKeyID:t,signingKeyID:a,keyRead:l}}});var b=t(4260),W=t(4615),v=t(7011),D=t(3414),h=t(2035),q=t(2350),I=t(7518),K=t.n(I);const Z=(0,b.Z)(g,[["render",f]]),U=Z;K()(g,"components",{QExpansionItem:W.Z,QList:v.Z,QItem:D.Z,QItemSection:h.Z,QItemLabel:q.Z});const C=(0,n.aZ)({components:{ShowKeyDetails:U},name:"ShowKey",props:{keyValue:{type:String,required:!0,default:""},label:{type:String,required:!0,default:"A Key"},download:{type:Boolean,default:!1},copy:{type:Boolean,default:!1},keyDetail:{type:Boolean,default:!1}},setup(e){const l=(0,o.Fl)((()=>e.label.split(" ").join("_")));return{filename:l,exportFile:i.Z,addToClipboard:u.H}}});var x=t(4842),Q=t(4554);const V=(0,b.Z)(C,[["render",a]]),z=V;K()(C,"components",{QInput:x.Z,QIcon:Q.Z})}}]);