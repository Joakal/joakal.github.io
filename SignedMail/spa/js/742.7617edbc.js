"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[742],{6598:(e,t,i)=>{i.d(t,{H:()=>a});var n=i(1914),l=i(6417);const a=({label:e,value:t})=>(0,n.Z)(t).then((()=>{l.Z.create({type:"positive",message:`Copied ${e} to clipboard`})}))},3742:(e,t,i)=>{i.r(t),i.d(t,{default:()=>V});var n=i(3673);const l=(0,n._)("div",{class:"flex flex-center"},[(0,n._)("div",{class:"text-h4"},"Signing")],-1),a={class:"fit col"},o={class:"fit col justify-center q-pa-sm q-gutter-md"},u={class:"row q-gutter-md"},s={class:"row"},d={class:"row q-pa-sm q-gutter-md"},p=(0,n.Uk)(" No results "),r={class:"fit"};function c(e,t,i,c,v,m){const y=(0,n.up)("q-icon"),f=(0,n.up)("q-input"),g=(0,n.up)("q-btn"),k=(0,n.up)("q-item-section"),b=(0,n.up)("q-item"),w=(0,n.up)("q-select"),S=(0,n.up)("q-expansion-item"),_=(0,n.up)("q-form"),h=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(h,null,{default:(0,n.w5)((()=>[l,(0,n.Wm)(_,{onSubmit:e.handleSigning},{default:(0,n.w5)((()=>{var i,l,r;return[(0,n._)("div",a,[(0,n.Wm)(f,{modelValue:e.input,"onUpdate:modelValue":t[1]||(t[1]=t=>e.input=t),filled:"",type:"textarea",label:"Input",disable:!(null===(i=e.privateKeySelected)||void 0===i?void 0:i.key)},{append:(0,n.w5)((()=>[(0,n.Wm)(y,{name:"content_copy",class:"cursor-pointer",onClick:t[0]||(t[0]=t=>e.addToClipboard({label:"Input",value:e.input}))})])),_:1},8,["modelValue","disable"])]),(0,n._)("div",o,[(0,n._)("div",u,[(0,n.Wm)(g,{color:"primary",label:"Sign",onClick:e.handleSigning,disable:!(null===(l=e.privateKeySelected)||void 0===l?void 0:l.key)},null,8,["onClick","disable"])]),(0,n._)("div",s,[(0,n.Wm)(S,{class:"fit","expand-separator":"",icon:"perm_identity",label:"Settings",caption:(null===(r=e.privateKeySelected)||void 0===r?void 0:r.userID)?e.privateKeySelected.userID:"Please add a private key"},{default:(0,n.w5)((()=>[(0,n._)("div",d,[(0,n.Wm)(w,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.privateKeyOptions,hint:"Private Key","option-value":"keyID","option-label":"userID",onFilter:e.privateKeyFilterFn,modelValue:e.privateKeySelected,"onUpdate:modelValue":t[2]||(t[2]=t=>e.privateKeySelected=t)},{"no-option":(0,n.w5)((()=>[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Wm)(k,{class:"text-grey"},{default:(0,n.w5)((()=>[p])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])])),_:1},8,["caption"])])])]})),_:1},8,["onSubmit"]),(0,n._)("div",r,[(0,n.Wm)(f,{modelValue:e.output,"onUpdate:modelValue":t[4]||(t[4]=t=>e.output=t),filled:"",readonly:"",type:"textarea",label:"Output",counter:""},{append:(0,n.w5)((()=>[(0,n.Wm)(y,{name:"content_copy",class:"cursor-pointer",onClick:t[3]||(t[3]=t=>e.addToClipboard({label:"Output",value:e.output}))})])),_:1},8,["modelValue"])])])),_:1})}var v=i(1959),m=i(8825),y=i(3617),f=i(329),g=i(745),k=i(6598),b=function(e,t,i,n){function l(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function o(e){try{s(n.next(e))}catch(t){a(t)}}function u(e){try{s(n["throw"](e))}catch(t){a(t)}}function s(e){e.done?i(e.value):l(e.value).then(o,u)}s((n=n.apply(e,t||[])).next())}))};const w=(0,n.aZ)({name:"Signing",setup(){const e=(0,m.Z)(),t=(0,y.oR)(f.storeKey),i=(0,v.iH)(!1),n=(0,v.iH)(""),l=(0,v.iH)(""),a=(0,v.iH)(t.state.keys.privateKeys),o=(0,v.Fl)((()=>t.state.keys.privateKeys)),u=(0,v.Fl)({get:()=>t.state.keys.privateKeys.find((e=>e.keyID===t.state.keys.defaults.signingKeyID)),set:e=>t.commit("keys/changeDefaultSigning",null===e||void 0===e?void 0:e.keyID)}),s=()=>b(this,void 0,void 0,(function*(){var t;if(null===(t=u.value)||void 0===t?void 0:t.key){const e=yield(0,g.l)(n.value,u.value.key),t=`${n.value}\n\n${e}`;l.value=t}else e.notify({type:"negative",message:"You must have a private key to sign with"})})),d=(e,t)=>{t(""!==e?()=>{const t=e.toLowerCase();a.value=o.value.filter((e=>e.userID.toLowerCase().indexOf(t)>-1))}:()=>{a.value=o.value})};return{isPwd:i,input:n,output:l,privateKeySelected:u,privateKeyOptions:a,handleSigning:s,addToClipboard:k.H,privateKeyFilterFn:d}}});var S=i(4260),_=i(4379),h=i(5269),K=i(4842),I=i(4554),q=i(8240),Z=i(4615),x=i(7208),C=i(3414),W=i(2035),D=i(7518),F=i.n(D);const Q=(0,S.Z)(w,[["render",c]]),V=Q;F()(w,"components",{QPage:_.Z,QForm:h.Z,QInput:K.Z,QIcon:I.Z,QBtn:q.Z,QExpansionItem:Z.Z,QSelect:x.Z,QItem:C.Z,QItemSection:W.Z})}}]);