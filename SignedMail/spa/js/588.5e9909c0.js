"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[588],{6598:(e,l,o)=>{o.d(l,{H:()=>n});var i=o(1914),t=o(6417);const n=({label:e,value:l})=>(0,i.Z)(l).then((()=>{t.Z.create({type:"positive",message:`Copied ${e} to clipboard`})}))},9588:(e,l,o)=>{o.r(l),o.d(l,{default:()=>F});var i=o(3673);const t={class:"q-pa-sm q-gutter-sm"},n=(0,i._)("canvas",{id:"qr-code-public-key"},null,-1),u=(0,i.Uk)(" No results ");function a(e,l,o,a,c,d){const s=(0,i.up)("q-btn"),r=(0,i.up)("q-input"),p=(0,i.up)("q-item-section"),y=(0,i.up)("q-item"),b=(0,i.up)("q-select"),m=(0,i.up)("q-card-section"),v=(0,i.up)("q-card"),f=(0,i.up)("q-dialog");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s,{color:"secondary",label:"Public Key",onClick:l[0]||(l[0]=l=>e.showPublicKey=!0)}),(0,i.Wm)(f,{modelValue:e.showPublicKey,"onUpdate:modelValue":l[5]||(l[5]=l=>e.showPublicKey=l)},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{style:{width:"700px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{"model-value":e.publicKeyValue,filled:"",readonly:"",type:"textarea",label:"Public Key"},null,8,["model-value"]),(0,i._)("div",t,[(0,i.Wm)(s,{color:"secondary",icon:"content_copy",label:"Public Key",onClick:l[1]||(l[1]=l=>e.addToClipboard({label:"Public Key",value:e.publicKeyValue})),disable:!e.publicKeySelected},null,8,["disable"]),(0,i.Wm)(s,{color:"secondary",icon:"offline_share",label:"SignedMail Link",onClick:l[2]||(l[2]=l=>e.addToClipboard({label:"Public Key",value:e.fullUrl})),disable:!e.publicKeySelected},null,8,["disable"]),(0,i.Wm)(s,{color:"secondary",icon:"download",label:"Download",onClick:l[3]||(l[3]=l=>e.exportFile("PublicKey.crt",e.publicKeyValue)),disable:!e.publicKeySelected},null,8,["disable"]),(0,i.Wm)(s,{color:"secondary",icon:"qr_code_2",label:"QR Code",onClick:e.qrCode,disable:!e.publicKeySelected},null,8,["onClick","disable"])]),n,(0,i.Wm)(b,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",clearable:"",options:e.publicKeyOptions,hint:"Public Key to share","option-value":"keyID","option-label":"userID",onFilter:e.publicKeyFilterFn,modelValue:e.publicKeySelected,"onUpdate:modelValue":l[4]||(l[4]=l=>e.publicKeySelected=l)},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"text-grey"},{default:(0,i.w5)((()=>[u])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var c=o(1959),d=o(3617),s=o(329),r=o(2841),p=o(6598),y=o(5549),b=o(1055),m=function(e,l,o,i){function t(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,n){function u(e){try{c(i.next(e))}catch(l){n(l)}}function a(e){try{c(i["throw"](e))}catch(l){n(l)}}function c(e){e.done?o(e.value):t(e.value).then(u,a)}c((i=i.apply(e,l||[])).next())}))};const v=(0,i.aZ)({props:{},setup(){const e=(0,d.oR)(s.storeKey),l=(0,c.iH)(!1),o=(0,c.iH)(e.state.keys.publicKeys),i=(e,l)=>{l(""!==e?()=>{const l=e.toLowerCase();o.value=n.value.filter((e=>e.userID.toLowerCase().indexOf(l)>-1))}:()=>{o.value=n.value})},t=()=>m(this,void 0,void 0,(function*(){let e=document.getElementById("qr-code-public-key");yield y.toCanvas(e,v.value,{errorCorrectionLevel:"H"})})),n=(0,c.Fl)((()=>e.state.keys.publicKeys)),u=(0,c.Fl)((()=>{var e;return(null===(e=n.value.find((e=>{var l;return e.keyID===(null===(l=a.value)||void 0===l?void 0:l.keyID)})))||void 0===e?void 0:e.key)||""})),a=(0,c.Fl)({get:()=>e.state.keys.publicKeys.find((l=>l.keyID===e.state.keys.defaults.displayKeyID)),set:l=>e.commit("keys/changeDefaultDisplay",null===l||void 0===l?void 0:l.keyID)}),v=(0,c.Fl)((()=>`${b.P}add?key=${encodeURIComponent(u.value)}`));return{showPublicKey:l,publicKeySelected:a,publicKeyValue:u,publicKeyOptions:o,fullUrl:v,publicKeyFilterFn:i,exportFile:r.Z,addToClipboard:p.H,qrCode:t}}});var f=o(4260),K=o(8240),k=o(6778),w=o(151),C=o(5589),h=o(4842),q=o(7208),D=o(3414),I=o(2035),P=o(7518),Z=o.n(P);const g=(0,f.Z)(v,[["render",a]]),F=g;Z()(v,"components",{QBtn:K.Z,QDialog:k.Z,QCard:w.Z,QCardSection:C.Z,QInput:h.Z,QSelect:q.Z,QItem:D.Z,QItemSection:I.Z})}}]);