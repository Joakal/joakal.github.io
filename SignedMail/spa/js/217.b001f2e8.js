"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[217],{6598:(e,t,i)=>{i.d(t,{H:()=>a});var l=i(1914),n=i(6417);const a=({label:e,value:t})=>(0,l.Z)(t).then((()=>{n.Z.create({type:"positive",message:`Copied ${e} to clipboard`})}))},7217:(e,t,i)=>{i.r(t),i.d(t,{default:()=>D});var l=i(3673);const n=(0,l._)("div",{class:"flex flex-center"},[(0,l._)("div",{class:"text-h4"},"Verifying")],-1),a={class:"fit col"},u={class:"fit col justify-center q-pa-sm q-gutter-md"},o={class:"row q-gutter-md"},s={class:"row"},d={class:"row q-pa-sm q-gutter-md"},c=(0,l.Uk)(" No results ");function r(e,t,i,r,p,y){const m=(0,l.up)("q-icon"),f=(0,l.up)("q-input"),v=(0,l.up)("q-btn"),b=(0,l.up)("q-item-section"),g=(0,l.up)("q-item"),h=(0,l.up)("q-select"),k=(0,l.up)("q-expansion-item"),w=(0,l.up)("q-form"),S=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(S,null,{default:(0,l.w5)((()=>[n,(0,l.Wm)(w,{onSubmit:e.handleVerifying},{default:(0,l.w5)((()=>{var i,n,r;return[(0,l._)("div",a,[(0,l.Wm)(f,{modelValue:e.input,"onUpdate:modelValue":t[1]||(t[1]=t=>e.input=t),filled:"",type:"textarea",rules:[e=>!!e||"Field is required"],label:"Message",disable:!(null===(i=e.publicKeySelected)||void 0===i?void 0:i.key)},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"content_copy",class:"cursor-pointer",onClick:t[0]||(t[0]=t=>e.addToClipboard({label:"Message",value:e.input}))})])),_:1},8,["modelValue","rules","disable"]),(0,l.Wm)(f,{modelValue:e.detachedSignature,"onUpdate:modelValue":t[3]||(t[3]=t=>e.detachedSignature=t),filled:"",type:"textarea",rules:[e=>!!e||"Field is required"],label:"PGP SIGNATURE"},{append:(0,l.w5)((()=>[(0,l.Wm)(m,{name:"content_copy",class:"cursor-pointer",onClick:t[2]||(t[2]=t=>e.addToClipboard({label:"PGP SIGNATURE",value:e.detachedSignature}))})])),_:1},8,["modelValue","rules"])]),(0,l._)("div",u,[(0,l._)("div",o,[(0,l.Wm)(v,{color:"primary",label:"Verify",onClick:e.handleVerifying,disable:!(null===(n=e.publicKeySelected)||void 0===n?void 0:n.key)},null,8,["onClick","disable"])]),(0,l._)("div",s,[(0,l.Wm)(k,{class:"fit","expand-separator":"",icon:"perm_identity",label:"Settings",caption:(null===(r=e.publicKeySelected)||void 0===r?void 0:r.userID)?e.publicKeySelected.userID:"Please add a public key"},{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l.Wm)(h,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.publicKeyOptions,hint:"Public Key","option-value":"keyID","option-label":"userID",onFilter:e.publicKeyFilterFn,modelValue:e.publicKeySelected,"onUpdate:modelValue":t[4]||(t[4]=t=>e.publicKeySelected=t)},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"text-grey"},{default:(0,l.w5)((()=>[c])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])])),_:1},8,["caption"])])])]})),_:1},8,["onSubmit"])])),_:1})}var p=i(1959),y=i(8825),m=i(3617),f=i(329),v=i(745),b=i(6598),g=function(e,t,i,l){function n(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,a){function u(e){try{s(l.next(e))}catch(t){a(t)}}function o(e){try{s(l["throw"](e))}catch(t){a(t)}}function s(e){e.done?i(e.value):n(e.value).then(u,o)}s((l=l.apply(e,t||[])).next())}))};const h=(0,l.aZ)({name:"Verifying",setup(){const e=(0,y.Z)(),t=(0,m.oR)(f.storeKey),i=(0,p.iH)(!1),l=(0,p.iH)(""),n=(0,p.iH)(""),a=(0,p.iH)(t.state.keys.publicKeys),u=(0,p.Fl)((()=>t.state.keys.publicKeys)),o=(0,p.Fl)({get:()=>t.state.keys.publicKeys.find((e=>e.keyID===t.state.keys.defaults.verifyingKeyID)),set:e=>t.commit("keys/changeDefaultVerifying",null===e||void 0===e?void 0:e.keyID)}),s=()=>g(this,void 0,void 0,(function*(){if(o.value)try{yield(0,v.n5)(l.value,o.value.key,n.value),e.notify({type:"positive",message:"This has been signed"})}catch({message:t}){e.notify({type:"negative",message:t})}else e.notify({type:"negative",message:"You must have a public key to verify with"})})),d=(e,t)=>{t(""!==e?()=>{const t=e.toLowerCase();a.value=u.value.filter((e=>e.userID.toLowerCase().indexOf(t)>-1))}:()=>{a.value=u.value})};return{isPwd:i,input:l,detachedSignature:n,publicKeySelected:o,publicKeyOptions:a,handleVerifying:s,addToClipboard:b.H,publicKeyFilterFn:d}}});var k=i(4260),w=i(4379),S=i(5269),_=i(4842),K=i(4554),q=i(8240),V=i(4615),I=i(7208),Z=i(3414),x=i(2035),C=i(7518),F=i.n(C);const W=(0,k.Z)(h,[["render",r]]),D=W;F()(h,"components",{QPage:w.Z,QForm:S.Z,QInput:_.Z,QIcon:K.Z,QBtn:q.Z,QExpansionItem:V.Z,QSelect:I.Z,QItem:Z.Z,QItemSection:x.Z})}}]);