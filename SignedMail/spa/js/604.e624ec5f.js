"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[604],{7293:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var s=t(3673);const i={class:"q-pa-md row justify-evenly fit"},o={key:0,class:"q-pa-md row"};function y(e,n,t,y,a,l){const u=(0,s.up)("NewKey"),c=(0,s.up)("ShowKeys");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",i,[(0,s._)("div",null,[(0,s.Wm)(u,{onNewKeys:n[0]||(n[0]=n=>e.showKeys=n)})])]),e.showKeys?((0,s.wg)(),(0,s.iD)("div",o,[(0,s.Wm)(c,{keys:e.showKeys},null,8,["keys"])])):(0,s.kq)("",!0)],64)}var a=t(1959),l=t(8825),u=t(9582),c=t(3617),r=t(329),d=t(745),v=function(e,n,t,s){function i(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,o){function y(e){try{l(s.next(e))}catch(n){o(n)}}function a(e){try{l(s["throw"](e))}catch(n){o(n)}}function l(e){e.done?t(e.value):i(e.value).then(y,a)}l((s=s.apply(e,n||[])).next())}))};const f=(0,s.aZ)({name:"AddingKeys",components:{NewKey:(0,s.RC)((()=>Promise.all([t.e(736),t.e(148)]).then(t.bind(t,6148)))),ShowKeys:(0,s.RC)((()=>Promise.all([t.e(736),t.e(441)]).then(t.bind(t,2441))))},setup(){const e=(0,l.Z)(),n=(0,c.oR)(r.storeKey),t=(0,u.yj)(),i=(0,a.iH)(void 0),o=(0,a.Fl)((()=>n.state.keys.publicKeys)),y=(0,a.Fl)((()=>n.state.keys.privateKeys)),f=e=>o.value.find((n=>n.keyID===e.getKeyID().toHex())),h=e=>y.value.find((n=>n.keyID===e.getKeyID().toHex())),p=t=>v(this,void 0,void 0,(function*(){try{const s=yield(0,d.c)(t);s.isPrivate()&&h(s)||f(s)?e.notify({type:"negative",message:"This key already exists locally"}):yield n.dispatch("keys/importPublicKey",s),i.value={publicKey:s}}catch(s){const{message:n}=s;e.notify({type:"negative",message:n})}}));return(0,s.bv)((()=>v(this,void 0,void 0,(function*(){var e;(null===(e=t.query)||void 0===e?void 0:e.key)&&(yield p(t.query.key))})))),{showKeys:i}}});var h=t(4260);const p=(0,h.Z)(f,[["render",y]]),w=p}}]);