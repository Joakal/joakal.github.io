"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[535],{3535:(e,l,i)=>{i.r(l),i.d(l,{default:()=>F});var o=i(3673);const u={class:"q-pa-sm q-gutter-sm"},a=(0,o._)("canvas",{id:"qr-code-public-key"},null,-1),c=(0,o.Uk)(" No results ");function t(e,l,i,t,n,d){const s=(0,o.up)("q-btn"),b=(0,o.up)("q-input"),r=(0,o.up)("q-item-section"),p=(0,o.up)("q-item"),y=(0,o.up)("q-select"),m=(0,o.up)("q-card-section"),K=(0,o.up)("q-card"),v=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(s,{color:"secondary",label:"Public Key",onClick:l[0]||(l[0]=l=>e.showPublicKey=!0)}),(0,o.Wm)(v,{modelValue:e.showPublicKey,"onUpdate:modelValue":l[5]||(l[5]=l=>e.showPublicKey=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(K,{style:{width:"700px","max-width":"80vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{"model-value":e.publicKeyValue,filled:"",readonly:"",type:"textarea",label:"Public Key"},null,8,["model-value"]),(0,o._)("div",u,[(0,o.Wm)(s,{color:"secondary",icon:"content_copy",label:"Public Key",onClick:l[1]||(l[1]=l=>e.addToClipboard({label:"Public Key",value:e.publicKeyValue})),disable:!e.publicKeySelected},null,8,["disable"]),(0,o.Wm)(s,{color:"secondary",icon:"offline_share",label:"SignedMail Link",onClick:l[2]||(l[2]=l=>e.addToClipboard({label:"Public Key",value:e.fullUrl})),disable:!e.publicKeySelected},null,8,["disable"]),(0,o.Wm)(s,{color:"secondary",icon:"download",label:"Download",onClick:l[3]||(l[3]=l=>e.exportFile("PublicKey.crt",e.publicKeyValue)),disable:!e.publicKeySelected},null,8,["disable"]),(0,o.Wm)(s,{color:"secondary",icon:"qr_code_2",label:"QR Code",onClick:e.qrCode,disable:!e.publicKeySelected},null,8,["onClick","disable"])]),a,(0,o.Wm)(y,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",clearable:"",options:e.publicKeyOptions,hint:"Public Key to share","option-value":"keyID","option-label":"userID",onFilter:e.publicKeyFilterFn,modelValue:e.publicKeySelected,"onUpdate:modelValue":l[4]||(l[4]=l=>e.publicKeySelected=l)},{"no-option":(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"text-grey"},{default:(0,o.w5)((()=>[c])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var n=i(8430),d=i(1959),s=i(2841),b=i(5549),r=i(2079),p=i(6598),y=i(1055);const m=(0,o.aZ)({name:"GlobalPublicKey",setup(){const e=(0,d.iH)(!1),l=(0,d.iH)(r.gb.getPublicKeys),i=(e,i)=>{i(""!==e?()=>{const i=e.toLowerCase();l.value=u.value.filter((e=>e.userID.toLowerCase().indexOf(i)>-1))}:()=>{l.value=u.value})},o=()=>(0,n.mG)(this,void 0,void 0,(function*(){let e=document.getElementById("qr-code-public-key");yield b.toCanvas(e,t.value,{errorCorrectionLevel:"H"})})),u=(0,d.Fl)((()=>r.gb.getPublicKeys)),a=(0,d.Fl)((()=>{var e;return c.value?null===(e=r.gb.getPublicKeyByKeyID(c.value.keyID))||void 0===e?void 0:e.key:void 0})),c=(0,d.Fl)({get:()=>r.gb.getPublicKeys.find((e=>e.keyID===r.gb.getDefaults.displayKeyID)),set:e=>r.gb.changeDefaultDisplay(null===e||void 0===e?void 0:e.keyID)}),t=(0,d.Fl)((()=>a.value?`${y.Pc}add?key=${encodeURIComponent(a.value)}`:""));return{showPublicKey:e,publicKeySelected:c,publicKeyValue:a,publicKeyOptions:l,fullUrl:t,publicKeyFilterFn:i,exportFile:s.Z,addToClipboard:p.H,qrCode:o}}});var K=i(4260),v=i(8240),f=i(6778),g=i(151),C=i(5589),k=i(4842),w=i(7208),P=i(3414),h=i(2035),q=i(7518),D=i.n(q);const I=(0,K.Z)(m,[["render",t]]),F=I;D()(m,"components",{QBtn:v.Z,QDialog:f.Z,QCard:g.Z,QCardSection:C.Z,QInput:k.Z,QSelect:w.Z,QItem:P.Z,QItemSection:h.Z})}}]);