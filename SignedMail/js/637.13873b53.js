"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[637],{6598:(e,i,t)=>{t.d(i,{H:()=>a});var l=t(1914),n=t(6417);const a=({label:e,value:i})=>(0,l.Z)(i).then((()=>{n.Z.create({type:"positive",message:`Copied ${e} to clipboard`})}))},7637:(e,i,t)=>{t.r(i),t.d(i,{default:()=>_});var l=t(3673);const n=(0,l.Wm)("div",{class:"flex flex-center"},[(0,l.Wm)("div",{class:"text-h4"},"Verifying")],-1),a={class:"fit col"},u={class:"fit col justify-center q-pa-sm q-gutter-md"},o={class:"row q-gutter-md"},s={class:"row"},d={class:"row q-pa-sm q-gutter-md"},c=(0,l.Uk)(" No results ");function r(e,i,t,r,p,m){const y=(0,l.up)("q-icon"),f=(0,l.up)("q-input"),b=(0,l.up)("q-btn"),v=(0,l.up)("q-item-section"),g=(0,l.up)("q-item"),h=(0,l.up)("q-select"),w=(0,l.up)("q-expansion-item"),k=(0,l.up)("q-form"),W=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(W,null,{default:(0,l.w5)((()=>[n,(0,l.Wm)(k,{onSubmit:e.handleVerifying},{default:(0,l.w5)((()=>{var t,n,r;return[(0,l.Wm)("div",a,[(0,l.Wm)(f,{modelValue:e.input,"onUpdate:modelValue":i[2]||(i[2]=i=>e.input=i),filled:"",type:"textarea",rules:[e=>!!e||"Field is required"],label:"Message",disable:!(null!==(t=e.publicKey)&&void 0!==t&&t.key)},{append:(0,l.w5)((()=>[(0,l.Wm)(y,{name:"content_copy",class:"cursor-pointer",onClick:i[1]||(i[1]=i=>e.addToClipboard({label:"Message",value:e.input}))})])),_:1},8,["modelValue","rules","disable"]),(0,l.Wm)(f,{modelValue:e.detachedSignature,"onUpdate:modelValue":i[4]||(i[4]=i=>e.detachedSignature=i),filled:"",type:"textarea",rules:[e=>!!e||"Field is required"],label:"PGP SIGNATURE"},{append:(0,l.w5)((()=>[(0,l.Wm)(y,{name:"content_copy",class:"cursor-pointer",onClick:i[3]||(i[3]=i=>e.addToClipboard({label:"PGP SIGNATURE",value:e.detachedSignature}))})])),_:1},8,["modelValue","rules"])]),(0,l.Wm)("div",u,[(0,l.Wm)("div",o,[(0,l.Wm)(b,{color:"primary",label:"Verify",onClick:e.handleVerifying,disable:!(null!==(n=e.publicKey)&&void 0!==n&&n.key)},null,8,["onClick","disable"])]),(0,l.Wm)("div",s,[(0,l.Wm)(w,{class:"fit","expand-separator":"",icon:"perm_identity",label:"Settings",caption:null!==(r=e.publicKey)&&void 0!==r&&r.userID?e.publicKey.userID:"Please add a public key"},{default:(0,l.w5)((()=>[(0,l.Wm)("div",d,[(0,l.Wm)(h,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.publicKeyOptions,hint:"Public Key","option-value":"key","option-label":"userID",onFilter:e.publicKeyFilterFn,modelValue:e.publicKey,"onUpdate:modelValue":i[5]||(i[5]=i=>e.publicKey=i)},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,{class:"text-grey"},{default:(0,l.w5)((()=>[c])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])])),_:1},8,["caption"])])])]})),_:1},8,["onSubmit"])])),_:1})}var p=t(1959),m=t(8825),y=t(4692),f=t(329),b=t(745),v=t(6598),g=function(e,i,t,l){function n(e){return e instanceof t?e:new t((function(i){i(e)}))}return new(t||(t=Promise))((function(t,a){function u(e){try{s(l.next(e))}catch(i){a(i)}}function o(e){try{s(l["throw"](e))}catch(i){a(i)}}function s(e){e.done?t(e.value):n(e.value).then(u,o)}s((l=l.apply(e,i||[])).next())}))};const h=(0,l.aZ)({name:"Encrypt",setup(){const e=(0,m.Z)(),i=(0,y.oR)(f.storeKey),{publicKeys:t,defaults:{verifyingKeyID:n}}=i.state.keys,a=(0,p.iH)(!1),u=(0,p.iH)(""),o=(0,p.iH)(""),s=(0,p.iH)(t.find((e=>e.keyID===n))),d=()=>g(this,void 0,void 0,(function*(){if(s.value)try{yield(0,b.n5)(u.value,s.value,o.value),e.notify({type:"positive",message:"This has been signed"})}catch({message:i}){e.notify({type:"negative",message:i})}else e.notify({type:"negative",message:"You must have a public key to verify with"})})),c=(0,p.iH)(t),r=(e,i)=>{i(""!==e?()=>{const i=e.toLowerCase();c.value=t.filter((e=>e.userID.toLowerCase().indexOf(i)>-1))}:()=>{c.value=t})};return(0,l.YP)(s,(e=>{i.commit("keys/changeDefaultVerifying",null===e||void 0===e?void 0:e.keyID)})),{isPwd:a,input:u,detachedSignature:o,publicKey:s,publicKeyOptions:c,handleVerifying:d,addToClipboard:v.H,publicKeyFilterFn:r}}});var w=t(4379),k=t(5269),W=t(4842),q=t(4554),K=t(8240),V=t(4615),I=t(7208),Z=t(3414),x=t(2035),C=t(7518),S=t.n(C);h.render=r;const _=h;S()(h,"components",{QPage:w.Z,QForm:k.Z,QInput:W.Z,QIcon:q.Z,QBtn:K.Z,QExpansionItem:V.Z,QSelect:I.Z,QItem:Z.Z,QItemSection:x.Z})}}]);