"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[854],{6854:(e,l,i)=>{i.r(l),i.d(l,{default:()=>F});var o=i(3673);const u={class:"q-pa-sm q-gutter-sm"},a=(0,o._)("canvas",{id:"qr-code-public-key"},null,-1),t=(0,o.Uk)(" No results ");function n(e,l,i,n,c,d){const r=(0,o.up)("q-btn"),s=(0,o.up)("q-input"),b=(0,o.up)("q-item-section"),p=(0,o.up)("q-item"),y=(0,o.up)("q-select"),m=(0,o.up)("q-card-section"),v=(0,o.up)("q-card"),K=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(r,{color:"secondary",label:"Public Key",onClick:l[0]||(l[0]=l=>e.showPublicKey=!0)}),(0,o.Wm)(K,{modelValue:e.showPublicKey,"onUpdate:modelValue":l[5]||(l[5]=l=>e.showPublicKey=l)},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{style:{width:"700px","max-width":"80vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(s,{"model-value":e.publicKeyValue,filled:"",readonly:"",type:"textarea",label:"Public Key"},null,8,["model-value"]),(0,o._)("div",u,[(0,o.Wm)(r,{color:"secondary",icon:"content_copy",label:"Public Key",onClick:l[1]||(l[1]=l=>e.addToClipboard({label:"Public Key",value:e.publicKeyValue})),disable:!e.publicKeySelected},null,8,["disable"]),(0,o.Wm)(r,{color:"secondary",icon:"offline_share",label:"SignedMail Link",onClick:l[2]||(l[2]=l=>e.addToClipboard({label:"Public Key",value:e.fullUrl})),disable:!e.publicKeySelected},null,8,["disable"]),(0,o.Wm)(r,{color:"secondary",icon:"download",label:"Download",onClick:l[3]||(l[3]=l=>e.exportFile("PublicKey.crt",e.publicKeyValue)),disable:!e.publicKeySelected},null,8,["disable"]),(0,o.Wm)(r,{color:"secondary",icon:"qr_code_2",label:"QR Code",onClick:e.qrCode,disable:!e.publicKeySelected},null,8,["onClick","disable"])]),a,(0,o.Wm)(y,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",clearable:"",options:e.publicKeyOptions,hint:"Public Key to share","option-value":"keyID","option-label":"userID",onFilter:e.publicKeyFilterFn,modelValue:e.publicKeySelected,"onUpdate:modelValue":l[4]||(l[4]=l=>e.publicKeySelected=l)},{"no-option":(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"text-grey"},{default:(0,o.w5)((()=>[t])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var c=i(8430),d=i(1959),r=i(2841),s=i(6598),b=i(5549),p=i(1055),y=i(2079);const m=(0,o.aZ)({props:{},setup(){const e=(0,d.iH)(!1),l=(0,d.iH)(y.gb.getPublicKeys),i=(e,i)=>{i(""!==e?()=>{const i=e.toLowerCase();l.value=u.value.filter((e=>e.userID.toLowerCase().indexOf(i)>-1))}:()=>{l.value=u.value})},o=()=>(0,c.mG)(this,void 0,void 0,(function*(){let e=document.getElementById("qr-code-public-key");yield b.toCanvas(e,n.value,{errorCorrectionLevel:"H"})})),u=(0,d.Fl)((()=>y.gb.getPublicKeys)),a=(0,d.Fl)((()=>{var e;return(null===(e=u.value.find((e=>{var l;return e.keyID===(null===(l=t.value)||void 0===l?void 0:l.keyID)})))||void 0===e?void 0:e.key)||""})),t=(0,d.Fl)({get:()=>y.gb.getPublicKeys.find((e=>e.keyID===y.gb.getDefaults.displayKeyID)),set:e=>y.gb.changeDefaultDisplay(null===e||void 0===e?void 0:e.keyID)}),n=(0,d.Fl)((()=>`${p.Pc}add?key=${encodeURIComponent(a.value)}`));return{showPublicKey:e,publicKeySelected:t,publicKeyValue:a,publicKeyOptions:l,fullUrl:n,publicKeyFilterFn:i,exportFile:r.Z,addToClipboard:s.H,qrCode:o}}});var v=i(4260),K=i(8240),f=i(6778),k=i(151),C=i(5589),g=i(4842),w=i(7208),h=i(3414),q=i(2035),P=i(7518),D=i.n(P);const I=(0,v.Z)(m,[["render",n]]),F=I;D()(m,"components",{QBtn:K.Z,QDialog:f.Z,QCard:k.Z,QCardSection:C.Z,QInput:g.Z,QSelect:w.Z,QItem:h.Z,QItemSection:q.Z})}}]);