"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[796],{3796:(e,l,i)=>{i.r(l),i.d(l,{default:()=>D});var t=i(3673);const a=(0,t._)("h1",{class:"flex flex-center"},"Verifying",-1),n={class:"fit col"},u={class:"fit col justify-center q-pa-sm q-gutter-md"},o={class:"row q-gutter-md"},s={class:"row"},d={class:"row q-pa-sm q-gutter-md"},c=(0,t.Uk)(" No results ");function r(e,l,i,r,p,y){const m=(0,t.up)("q-icon"),b=(0,t.up)("q-input"),g=(0,t.up)("q-btn"),f=(0,t.up)("q-item-section"),v=(0,t.up)("q-item"),h=(0,t.up)("q-select"),w=(0,t.up)("q-expansion-item"),S=(0,t.up)("q-form"),k=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(k,null,{default:(0,t.w5)((()=>[a,(0,t.Wm)(S,{onSubmit:e.handleVerifying},{default:(0,t.w5)((()=>{var i,a,r;return[(0,t._)("div",n,[(0,t.Wm)(b,{modelValue:e.input,"onUpdate:modelValue":l[1]||(l[1]=l=>e.input=l),filled:"",type:"textarea",rules:[e=>!!e||"Field is required"],label:"Message",disable:!(null===(i=e.publicKeySelected)||void 0===i?void 0:i.key)},{append:(0,t.w5)((()=>[(0,t.Wm)(m,{name:"content_copy",class:"cursor-pointer",onClick:l[0]||(l[0]=l=>e.addToClipboard({label:"Message",value:e.input}))})])),_:1},8,["modelValue","rules","disable"]),(0,t.Wm)(b,{modelValue:e.detachedSignature,"onUpdate:modelValue":l[3]||(l[3]=l=>e.detachedSignature=l),filled:"",type:"textarea",rules:[e=>!!e||"Field is required"],label:"PGP SIGNATURE"},{append:(0,t.w5)((()=>[(0,t.Wm)(m,{name:"content_copy",class:"cursor-pointer",onClick:l[2]||(l[2]=l=>e.addToClipboard({label:"PGP SIGNATURE",value:e.detachedSignature}))})])),_:1},8,["modelValue","rules"])]),(0,t._)("div",u,[(0,t._)("div",o,[(0,t.Wm)(g,{color:"primary",label:"Verify",onClick:e.handleVerifying,disable:!(null===(a=e.publicKeySelected)||void 0===a?void 0:a.key)},null,8,["onClick","disable"])]),(0,t._)("div",s,[(0,t.Wm)(w,{class:"fit","expand-separator":"",icon:"perm_identity",label:"Settings",caption:(null===(r=e.publicKeySelected)||void 0===r?void 0:r.userID)?e.publicKeySelected.userID:"Please add a public key"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(h,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:e.publicKeyOptions,hint:"Public Key","option-value":"keyID","option-label":"userID",onFilter:e.publicKeyFilterFn,modelValue:e.publicKeySelected,"onUpdate:modelValue":l[4]||(l[4]=l=>e.publicKeySelected=l)},{"no-option":(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(f,{class:"text-grey"},{default:(0,t.w5)((()=>[c])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])])),_:1},8,["caption"])])])]})),_:1},8,["onSubmit"])])),_:1})}var p=i(8430),y=i(1959),m=i(8825),b=i(745),g=i(6598),f=i(2079);const v=(0,t.aZ)({name:"Verifying",setup(){const e=(0,m.Z)(),l=(0,y.iH)(!1),i=(0,y.iH)(""),t=(0,y.iH)(""),a=(0,y.iH)(f.gb.getPublicKeys),n=(0,y.Fl)((()=>f.gb.getPublicKeys)),u=(0,y.Fl)({get:()=>f.gb.getPublicKeys.find((e=>e.keyID===f.gb.getDefaults.verifyingKeyID)),set:e=>f.gb.changeDefaultVerifying(null===e||void 0===e?void 0:e.keyID)}),o=()=>(0,p.mG)(this,void 0,void 0,(function*(){if(u.value)try{yield(0,b.n5)(i.value,u.value.key,t.value),e.notify({type:"positive",message:"This has been signed"})}catch({message:l}){e.notify({type:"negative",message:l})}else e.notify({type:"negative",message:"You must have a public key to verify with"})})),s=(e,l)=>{l(""!==e?()=>{const l=e.toLowerCase();a.value=n.value.filter((e=>e.userID.toLowerCase().indexOf(l)>-1))}:()=>{a.value=n.value})};return{isPwd:l,input:i,detachedSignature:t,publicKeySelected:u,publicKeyOptions:a,handleVerifying:o,addToClipboard:g.H,publicKeyFilterFn:s}}});var h=i(4260),w=i(4379),S=i(5269),k=i(4842),_=i(4554),q=i(8240),K=i(4615),V=i(7208),I=i(3414),Z=i(2035),C=i(7518),F=i.n(C);const P=(0,h.Z)(v,[["render",r]]),D=P;F()(v,"components",{QPage:w.Z,QForm:S.Z,QInput:k.Z,QIcon:_.Z,QBtn:q.Z,QExpansionItem:K.Z,QSelect:V.Z,QItem:I.Z,QItemSection:Z.Z})}}]);