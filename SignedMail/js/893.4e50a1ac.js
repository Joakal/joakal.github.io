"use strict";(self["webpackChunksignedmail"]=self["webpackChunksignedmail"]||[]).push([[893],{9893:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Q});var i=l(3673);const a=(0,i._)("h1",{class:"flex flex-center"},"Decrypt",-1),o={class:"fit col"},u={class:"fit col justify-center q-pa-sm q-gutter-md"},n={class:"row q-gutter-md"},p={class:"row"},s={class:"row q-pa-sm q-gutter-md"},d=(0,i.Uk)(" No results "),r={class:"row q-pa-sm q-gutter-md"},c=(0,i.Uk)(" No results "),y={class:"fit"};function v(e,t,l,v,m,b){const f=(0,i.up)("q-icon"),g=(0,i.up)("q-input"),K=(0,i.up)("q-btn"),w=(0,i.up)("q-item-section"),D=(0,i.up)("q-item"),k=(0,i.up)("q-select"),_=(0,i.up)("q-expansion-item"),I=(0,i.up)("q-form"),F=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(F,null,{default:(0,i.w5)((()=>[a,(0,i.Wm)(I,{onSubmit:e.handleDecrypt},{default:(0,i.w5)((()=>{var l,a,y;return[(0,i._)("div",o,[(0,i.Wm)(g,{modelValue:e.input,"onUpdate:modelValue":t[1]||(t[1]=t=>e.input=t),filled:"",label:"Input",type:"textarea",disable:!(null===(l=e.privateKeySelected)||void 0===l?void 0:l.key)},{append:(0,i.w5)((()=>[(0,i.Wm)(f,{name:"content_copy",class:"cursor-pointer",onClick:t[0]||(t[0]=t=>e.addToClipboard({label:"Input",value:e.input}))})])),_:1},8,["modelValue","disable"])]),(0,i._)("div",u,[(0,i._)("div",n,[(0,i.Wm)(K,{color:"primary",label:"Decrypt",onClick:e.handleDecrypt,disable:!(null===(a=e.privateKeySelected)||void 0===a?void 0:a.key)},null,8,["onClick","disable"])]),(0,i._)("div",p,[(0,i.Wm)(_,{class:"fit","expand-separator":"",icon:"perm_identity",label:"Settings",caption:(null===(y=e.privateKeySelected)||void 0===y?void 0:y.userID)?e.privateKeySelected.userID:"Please add a private key"},{default:(0,i.w5)((()=>[(0,i._)("div",s,[(0,i.Wm)(k,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",clearable:"",options:e.privateKeyOptions,hint:"Private Key to decrypt","option-value":"keyID","option-label":"userID",onFilter:e.privateKeyFilterFn,modelValue:e.privateKeySelected,"onUpdate:modelValue":t[2]||(t[2]=t=>e.privateKeySelected=t)},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"text-grey"},{default:(0,i.w5)((()=>[d])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])]),(0,i._)("div",r,[(0,i.Wm)(k,{filled:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",clearable:"",options:e.publicKeyOptions,hint:"Public Key to verify signature","option-value":"keyID","option-label":"userID",onFilter:e.publicKeyFilterFn,modelValue:e.publicKeySelected,"onUpdate:modelValue":t[3]||(t[3]=t=>e.publicKeySelected=t)},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(D,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"text-grey"},{default:(0,i.w5)((()=>[c])),_:1})])),_:1})])),_:1},8,["options","onFilter","modelValue"])])])),_:1},8,["caption"])])])]})),_:1},8,["onSubmit"]),(0,i._)("div",y,[(0,i.Wm)(g,{modelValue:e.output,"onUpdate:modelValue":t[6]||(t[6]=t=>e.output=t),filled:"",readonly:"",type:e.isPwd?"password":"textarea",label:"Output",counter:""},{append:(0,i.w5)((()=>[(0,i.Wm)(f,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[4]||(t[4]=t=>e.isPwd=!e.isPwd)},null,8,["name"]),(0,i.Wm)(f,{name:"content_copy",class:"cursor-pointer",onClick:t[5]||(t[5]=t=>e.addToClipboard({label:"Output",value:e.output}))})])),_:1},8,["modelValue","type"])])])),_:1})}var m=l(8430),b=l(1959),f=l(8825),g=l(745),K=l(6598),w=l(2079);const D=(0,i.aZ)({name:"Decrypt",setup(){const e=(0,f.Z)(),t=(0,b.iH)(!1),l=(0,b.iH)(""),i=(0,b.iH)({decrypted:"",verified:!1}),a=(0,b.iH)(w.gb.getPublicKeys),o=(0,b.iH)(w.gb.getPrivateKeys),u=(0,b.Fl)((()=>i.value.decrypted)),n=(0,b.Fl)((()=>w.gb.getPublicKeys)),p=(0,b.Fl)((()=>w.gb.getPrivateKeys)),s=(0,b.Fl)({get:()=>w.gb.getPublicKeys.find((e=>e.keyID===w.gb.getDefaults.decrypt.publicKeyID)),set:e=>w.gb.changeDefaultDecryptPublicKey(null===e||void 0===e?void 0:e.keyID)}),d=(0,b.Fl)({get:()=>w.gb.getPrivateKeys.find((e=>e.keyID===w.gb.getDefaults.decrypt.privateKeyID)),set:e=>w.gb.changeDefaultDecryptPrivateKey(null===e||void 0===e?void 0:e.keyID)}),r=()=>(0,m.mG)(this,void 0,void 0,(function*(){var t;if(d.value)try{i.value=yield(0,g.WB)(l.value,d.value.key,null===(t=s.value)||void 0===t?void 0:t.key)}catch({message:a}){e.notify({type:"negative",message:a})}else e.notify({type:"negative",message:"You must have a private key to decrypt from"})})),c=(e,t)=>{t(""!==e?()=>{const t=e.toLowerCase();a.value=n.value.filter((e=>e.userID.toLowerCase().indexOf(t)>-1))}:()=>{a.value=n.value})},y=(e,t)=>{t(""!==e?()=>{const t=e.toLowerCase();o.value=p.value.filter((e=>e.userID.toLowerCase().indexOf(t)>-1))}:()=>{o.value=p.value})};return{isPwd:t,input:l,output:u,publicKeySelected:s,publicKeyOptions:a,privateKeySelected:d,privateKeyOptions:o,handleDecrypt:r,addToClipboard:K.H,publicKeyFilterFn:c,privateKeyFilterFn:y}}});var k=l(4260),_=l(4379),I=l(5269),F=l(4842),P=l(4554),h=l(8240),q=l(4615),S=l(7208),W=l(3414),C=l(2035),V=l(7518),Z=l.n(V);const x=(0,k.Z)(D,[["render",v]]),Q=x;Z()(D,"components",{QPage:_.Z,QForm:I.Z,QInput:F.Z,QIcon:P.Z,QBtn:h.Z,QExpansionItem:q.Z,QSelect:S.Z,QItem:W.Z,QItemSection:C.Z})}}]);